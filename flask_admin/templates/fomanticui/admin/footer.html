{%- import 'admin/layout.html' as layout with context -%}

{% macro footer(menu_root=None) %}
  {%- if menu_root is none %}
    {# Use the same data source as the main navigation by default. Later this can be customised #}
    {% set menu_root = admin_view.admin.menu() %}
  {%- endif %}
  <div class="ui inverted vertical footer segment">
    <div class="ui center aligned container">
      {# Horizontal list for uncategorized or empty-category items #}
      <div class="ui equal width stackable inverted divided grid">
        <div class="column">
          <h4 class="ui inverted header">{{ admin_view.admin.name }}</h4>
          <div class="ui inverted horizontal link list">
            {%- for item in menu_root if (not item.is_category()) or (item.is_category() and not item.get_children()) %}
              {%- if item.is_accessible() and item.is_visible() %}
                <a href="{{ item.get_url() }}"
                   class="item"
                   {% if item.target %}target="{{ item.target }}"{% endif %}>
                  {# @TODO: add or remove #}
                  {# layout.menu_icon(item) #}
                  {{ item.name }}
                </a>
              {%- endif %}
            {%- endfor %}
          </div>
        </div>
        {%- for item in menu_root if item.is_category() and item.get_children() %}
          <div class="column">
            <h4 class="ui inverted header">{{ item.name }}</h4>
            <div class="ui inverted horizontal link list">
              {%- for child in item.get_children() if child.is_accessible() and child.is_visible() %}
                <a href="{{ child.get_url() }}"
                   class="item"
                   {% if child.target %}target="{{ child.target }}"{% endif %}>
                  {# @TODO: add or remove #}
                  {# layout.menu_icon(child) #}
                  {{ child.name }}
                </a>
              {%- endfor %}
            </div>
          </div>
        {%- endfor %}
      </div>
      {# Optional: bottom logo and horizontal link list built from menu_links #}
      {% set footer_links = admin_view.admin.menu_links() %}
      {%- if footer_links %}
        <div class="ui inverted section divider"></div>
        <div class="ui horizontal inverted small divided link list">
          {%- for link in footer_links if link.is_accessible() and link.is_visible() %}
            <a href="{{ link.get_url() }}"
               class="item"
               {% if link.target %}target="{{ link.target }}"{% endif %}>{{ link.name }}</a>
          {%- endfor %}
        </div>
      {%- endif %}
    </div>
  </div>
{% endmacro %}

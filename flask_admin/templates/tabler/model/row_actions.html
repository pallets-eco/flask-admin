{% import "admin/lib.html" as lib with context %}
{% macro link(action, url, icon_class=None) %}
    <a class="dropdown-item"
       href="{{ url }}"
       title="{{ action.title or '' }}">
        <span class="nav-link-icon d-md-none d-lg-inline-block">
            <i class="{{ icon_class or action.icon_class }}"></i>
        </span>
        {{ action.title or '' }}
    </a>
{% endmacro %}
{% macro view_row(action, row_id, row) %}
    <a class="dropdown-item"
       href="{{ get_url('.details_view', id=row_id, url=return_url) }}">
        <span class="nav-link-icon d-md-none d-lg-inline-block">
            <i class="fa fa-eye"></i>
        </span>
        {{ _gettext("View Record") }}
    </a>
{% endmacro %}
{% macro view_row_popup(action, row_id, row) %}
    {# djlint:off #}
    {% set content = "<span class='nav-link-icon d-md-none d-lg-inline-block'><i class='fa fa-eye'></i></span>" | safe + _gettext("View Record") %}
    {# djlint:on #}
    {{ lib.add_modal_button(url=get_url('.details_view', id=row_id, url=return_url, modal=True) , title=action.title, content=content, btn_class="dropdown-item") }}
{% endmacro %}
{% macro edit_row(action, row_id, row) %}
    {{ link(action, get_url('.edit_view', id=row_id, url=return_url) , 'fa fa-edit') }}
{% endmacro %}
{% macro edit_row_popup(action, row_id, row) %}
    {# djlint:off #}
    {% set content = "<span class='nav-link-icon d-md-none d-lg-inline-block'><i class='fa fa-edit'></i></span>" | safe + action.title %}
    {# djlint:on #}
    {{ lib.add_modal_button(url=get_url('.edit_view', id=row_id, url=return_url, modal=True) , title=action.title, content=content, btn_class="dropdown-item") }}
{% endmacro %}
{% macro delete_row(action, row_id, row) %}
    <form method="post" action="{{ get_url(".delete_view") }}">
        {{ delete_form.id(value=get_pk_value(row) ) }}
        {{ delete_form.url(value=return_url) }}
        {% if delete_form.csrf_token %}
            {{ delete_form.csrf_token }}
        {% elif csrf_token %}
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
        {% endif %}
        {% set confirmation = _gettext('Are you sure you want to delete this record?') %}
        <button type="submit"
                class="dropdown-item"
                onclick="return faHelpers.safeConfirm('{{ confirmation }}');">
            <span class="nav-link-icon d-md-none d-lg-inline-block">
                <i class="fa fa-trash"></i>
            </span>
            {{ _gettext("Delete Record") }}
        </button>
    </form>
{% endmacro %}
